<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plumber Router — plumb • plumber</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Plumber Router — plumb" />
<meta property="og:description" content="Plumber Router" />
<meta property="og:image" content="https://www.rplumber.io/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">plumber</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.7.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/quickstart.html">Quickstart</a>
    </li>
    <li>
      <a href="../articles/routing-and-input.html">Routing &amp; Input</a>
    </li>
    <li>
      <a href="../articles/rendering-output.html">Rendering Output</a>
    </li>
    <li>
      <a href="../articles/execution-model.html">Runtime</a>
    </li>
    <li>
      <a href="../articles/security.html">Security</a>
    </li>
    <li>
      <a href="../articles/hosting.html">Hosting</a>
    </li>
    <li>
      <a href="../articles/programmatic-usage.html">Programmatic Usage</a>
    </li>
    <li>
      <a href="../articles/tips-and-tricks.html">Tips &amp; Tricks</a>
    </li>
    <li>
      <a href="../articles/migration.html">Migration Guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/plumber/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plumber Router</h1>
    <small class="dont-index">Source: <a href='https://github.com/rstudio/plumber/blob/master/R/plumber.R'><code>R/plumber.R</code></a></small>
    <div class="hidden name"><code>plumber.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Plumber Router</p>
    </div>

    <pre class="usage"><span class='fu'><a href='https://www.rplumber.io/reference/plumber.html'>plumb</a></span>(file = <span class='kw'>NULL</span>, dir = <span class='st'>"."</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>file</th>
      <td><p>The file to parse as the plumber router definition.</p></td>
    </tr>
    <tr>
      <th>dir</th>
      <td><p>The directory containing the <code>plumber.R</code> file to parse as the
plumber router definition. Alternatively, if an <code>entrypoint.R</code> file is
found, it will take precedence and be responsible for returning a runnable
router.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Routers are the core request handler in plumber. A router is responsible for
taking an incoming request, submitting it through the appropriate filters and
eventually to a corresponding endpoint, if one is found.</p>
<p>See <a href='http://www.rplumber.io/articles/programmatic-usage.html'>http://www.rplumber.io/articles/programmatic-usage.html</a> for additional
details on the methods available on this object.</p>
    <h2 class="hasAnchor" id="super-class"><a class="anchor" href="#super-class"></a>Super class</h2>

    <p><code><a href='https://www.rplumber.io/reference/hookable.html'>plumber::hookable</a></code> -&gt; <code>plumber</code></p>
    <h2 class="hasAnchor" id="active-bindings"><a class="anchor" href="#active-bindings"></a>Active bindings</h2>

    <p><div class="r6-active-bindings"></p><dl>
<dt><code>endpoints</code></dt><dd><p>plumber router endpoints read-only</p></dd>

<dt><code>filters</code></dt><dd><p>plumber router filters read-only</p></dd>

<dt><code>mounts</code></dt><dd><p>plumber router mounts read-only</p></dd>

<dt><code>environment</code></dt><dd><p>plumber router environment read-only</p></dd>

<dt><code>routes</code></dt><dd><p>plumber router routes read-only</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>plumber$new()</code></a></p></li>
<li><p><a href='#method-run'><code>plumber$run()</code></a></p></li>
<li><p><a href='#method-mount'><code>plumber$mount()</code></a></p></li>
<li><p><a href='#method-registerHook'><code>plumber$registerHook()</code></a></p></li>
<li><p><a href='#method-handle'><code>plumber$handle()</code></a></p></li>
<li><p><a href='#method-print'><code>plumber$print()</code></a></p></li>
<li><p><a href='#method-serve'><code>plumber$serve()</code></a></p></li>
<li><p><a href='#method-route'><code>plumber$route()</code></a></p></li>
<li><p><a href='#method-call'><code>plumber$call()</code></a></p></li>
<li><p><a href='#method-onHeaders'><code>plumber$onHeaders()</code></a></p></li>
<li><p><a href='#method-onWSOpen'><code>plumber$onWSOpen()</code></a></p></li>
<li><p><a href='#method-setSerializer'><code>plumber$setSerializer()</code></a></p></li>
<li><p><a href='#method-set404Handler'><code>plumber$set404Handler()</code></a></p></li>
<li><p><a href='#method-setErrorHandler'><code>plumber$setErrorHandler()</code></a></p></li>
<li><p><a href='#method-filter'><code>plumber$filter()</code></a></p></li>
<li><p><a href='#method-apiSpec'><code>plumber$apiSpec()</code></a></p></li>
<li><p><a href='#method-openAPIFile'><code>plumber$openAPIFile()</code></a></p></li>
<li><p><a href='#method-swaggerFile'><code>plumber$swaggerFile()</code></a></p></li>
<li><p><a href='#method-addEndpoint'><code>plumber$addEndpoint()</code></a></p></li>
<li><p><a href='#method-addAssets'><code>plumber$addAssets()</code></a></p></li>
<li><p><a href='#method-addFilter'><code>plumber$addFilter()</code></a></p></li>
<li><p><a href='#method-addGlobalProcessor'><code>plumber$addGlobalProcessor()</code></a></p></li>
<li><p><a href='#method-clone'><code>plumber$clone()</code></a></p></li>
</ul>
<p><details open ><summary>Inherited methods</summary>
<ul>
<li><p><span class="pkg-link" data-pkg="plumber" data-topic="hookable" data-id="registerHooks"><a href='../../plumber/html/hookable.html#method-registerHooks'><code>plumber::hookable$registerHooks()</code></a></span></p></li>
</ul>
</details>

<hr>
<a id="method-new"></a></p><h3>Method <code>new()</code></h3>
<p>Create a new <code>plumber</code> router</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>new</span>(file = <span class='kw'>NULL</span>, filters = <span class='kw'>defaultPlumberFilters</span>, <span class='kw'>envir</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>file</code></dt><dd><p>path to file to plumb</p></dd>

<dt><code>filters</code></dt><dd><p>a list of plumber filters</p></dd>

<dt><code>envir</code></dt><dd><p>an environment to be used as the enclosure for the routers execution</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p>A new <code>plumber</code> router</p>
<p><hr>
<a id="method-run"></a></p><h3>Method <code>run()</code></h3>
<p>Start a server using <code>plumber</code> object.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>run</span>(
  host = <span class='st'>"127.0.0.1"</span>,
  port = <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"plumber.port"</span>),
  swagger = <span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span>(),
  debug = <span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span>(),
  swaggerCallback = <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span>(<span class='st'>"plumber.swagger.url"</span>, <span class='kw'>NULL</span>)
)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>host</code></dt><dd><p>a string that is a valid IPv4 or IPv6 address that is owned by
this server, which the application will listen on. "0.0.0.0" represents
all IPv4 addresses and "::/0" represents all IPv6 addresses.</p></dd>

<dt><code>port</code></dt><dd><p>a number or integer that indicates the server port that should
be listened on. Note that on most Unix-like systems including Linux and
Mac OS X, port numbers smaller than 1025 require root privileges.</p></dd>

<dt><code>swagger</code></dt><dd><p>a function that enhances the existing OpenAPI Specification.</p></dd>

<dt><code>debug</code></dt><dd><p><code>TRUE</code> provides more insight into your API errors.</p></dd>

<dt><code>swaggerCallback</code></dt><dd><p>a callback function for taking action on the url for swagger page.</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p><code>port</code> does not need to be explicitly assigned.</p>
<p><code>swagger</code> should be either a logial or a function . When <code>TRUE</code> or a
function, multiple handles will be added to <code>plumber</code> object. OpenAPI json
file will be served on paths <code>/openapi.json</code> and <code>/swagger.json</code>. Swagger UI
will be served on paths <code>/__swagger__/index.html</code> and <code>/__swagger__/</code>. When
using a function, it will receive the plumber router as the first parameter
and current OpenAPI Specification as the second. This function should return a
list containing OpenAPI Specification.
See <a href='http://spec.openapis.org/oas/v3.0.3'>http://spec.openapis.org/oas/v3.0.3</a></p>
<p><code>swaggerCallback</code> When set, it will be called with a character string corresponding
to the swagger UI url. It allows RStudio to open swagger UI when plumber router
run method is executed using default <code>plumber.swagger.url</code> option.</p>

<h3>Examples</h3>
<p><div class="r example copy"></p><pre>\dontrun{
pr &lt;- plumber$new
swagger &lt;- function(pr_, spec) {
  spec$servers[[1]]$description &lt;- "MyCustomAPISpec"
  spec
}
pr$run(swagger = swagger)
}
</pre><p></div></p>

<p><hr>
<a id="method-mount"></a></p><h3>Method <code>mount()</code></h3>
<p>Mount a plumber router</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>mount</span>(<span class='kw'>path</span>, <span class='kw'>router</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>path</code></dt><dd><p>a character string. Where to mount router.</p></dd>

<dt><code>router</code></dt><dd><p>a plumber router. Router to be mounted.</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Plumber routers can be “nested” by mounting one into another
using the <code>mount()</code> method. This allows you to compartmentalize your API
by paths which is a great technique for decomposing large APIs into smaller files.</p>

<h3>Examples</h3>
<p><div class="r example copy"></p><pre>\dontrun{
root &lt;- plumber$new()

users &lt;- plumber$new("users.R")
root$mount("/users", users)

products &lt;- plumber$new("products.R")
root$mount("/products", products)
}
</pre><p></div></p>

<p><hr>
<a id="method-registerHook"></a></p><h3>Method <code>registerHook()</code></h3>
<p>Register a hook</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>registerHook</span>(
  stage = <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"preroute"</span>, <span class='st'>"postroute"</span>, <span class='st'>"preserialize"</span>, <span class='st'>"postserialize"</span>, <span class='st'>"exit"</span>),
  <span class='kw'>handler</span>
)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>stage</code></dt><dd><p>a character string. Point in the lifecycle of a request.</p></dd>

<dt><code>handler</code></dt><dd><p>a hook function.</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Plumber routers support the notion of "hooks" that can be registered
to execute some code at a particular point in the lifecycle of a request.
Plumber routers currently support four hooks:</p><ol>
<li><p><code>preroute(data, req, res)</code></p></li>
<li><p><code>postroute(data, req, res, value)</code></p></li>
<li><p><code>preserialize(data, req, res, value)</code></p></li>
<li><p><code>postserialize(data, req, res, value)</code></p></li>
</ol><p>In all of the above you have access to a disposable environment in the <code>data</code>
parameter that is created as a temporary data store for each request. Hooks
can store temporary data in these hooks that can be reused by other hooks
processing this same request.</p>
<p>One feature when defining hooks in Plumber routers is the ability to modify
the returned value. The convention for such hooks is: any function that accepts
a parameter named <code>value</code> is expected to return the new value. This could
be an unmodified version of the value that was passed in, or it could be a
mutated value. But in either case, if your hook accepts a parameter
named <code>value</code>, whatever your hook returns will be used as the new value
for the response.</p>
<p>You can add hooks using the <code>registerHook</code> method, or you can add multiple
hooks at once using the <code>registerHooks</code> method which takes a name list in
which the names are the names of the hooks, and the values are the
handlers themselves.</p>

<h3>Examples</h3>
<p><div class="r example copy"></p><pre>\dontrun{
pr &lt;- plumber$new()
pr$registerHook("preroute", function(req){
  cat("Routing a request for", req$PATH_INFO, "...\n")
})
pr$registerHooks(list(
  preserialize=function(req, value){
    print("About to serialize this value:")
    print(value)

    # Must return the value since we took one in. Here we're not choosing
    # to mutate it, but we could.
    value
  },
  postserialize=function(res){
    print("We serialized the value as:")
    print(res$body)
  }
))

pr$handle("GET", "/", function(){ 123 })
}
</pre><p></div></p>

<p><hr>
<a id="method-handle"></a></p><h3>Method <code>handle()</code></h3>
<p>Define endpoints</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>handle</span>(<span class='kw'>methods</span>, <span class='kw'>path</span>, <span class='kw'>handler</span>, <span class='kw'>preempt</span>, <span class='kw'>serializer</span>, <span class='kw'>endpoint</span>, <span class='kw'>...</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>methods</code></dt><dd><p>a character string. http method.</p></dd>

<dt><code>path</code></dt><dd><p>a character string. Api endpoints</p></dd>

<dt><code>handler</code></dt><dd><p>a handler function.</p></dd>

<dt><code>preempt</code></dt><dd><p>a preempt function.</p></dd>

<dt><code>serializer</code></dt><dd><p>a serializer function.</p></dd>

<dt><code>endpoint</code></dt><dd><p>a <code>PlumberEndpoint</code> object.</p></dd>

<dt><code>...</code></dt><dd><p>additional arguments for <code>PlumberEndpoint</code> creation</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>The “handler” functions that you define in these handle calls
are identical to the code you would have defined in your plumber.R file
if you were using annotations to define your API. The handle() method
takes additional arguments that allow you to control nuanced behavior
of the endpoint like which filter it might preempt or which serializer
it should use.</p>

<h3>Examples</h3>
<p><div class="r example copy"></p><pre>\dontrun{
pr &lt;- plumber$new()
pr$handle("GET", "/", function(){
  "&lt;html&gt;&lt;h1&gt;Programmatic Plumber!&lt;/h1&gt;&lt;/html&gt;"
}, serializer=plumber::serializer_html())
}
</pre><p></div></p>

<p><hr>
<a id="method-print"></a></p><h3>Method <code><a href='https://rdrr.io/r/base/print.html'>print()</a></code></h3>
<p>Print reprensation of plumber router.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(prefix = <span class='st'>""</span>, topLevel = <span class='fl'>TRUE</span>, <span class='kw'>...</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>prefix</code></dt><dd><p>a character string. Prefix to append to representation.</p></dd>

<dt><code>topLevel</code></dt><dd><p>a logical value. When method executed on top level
router, set to <code>TRUE</code>.</p></dd>

<dt><code>...</code></dt><dd><p>additional arguments for recursive calls</p></dd>

</dl><p></div></p>
<h3>Returns</h3>
<p>A terminal friendly represention of a plumber router.</p>
<p><hr>
<a id="method-serve"></a></p><h3>Method <code>serve()</code></h3>
<p>Serve a request</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>serve</span>(<span class='kw'>req</span>, <span class='kw'>res</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>req</code></dt><dd><p>request object</p></dd>

<dt><code>res</code></dt><dd><p>response object</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-route"></a></p><h3>Method <code>route()</code></h3>
<p>Route a request</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>route</span>(<span class='kw'>req</span>, <span class='kw'>res</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>req</code></dt><dd><p>request object</p></dd>

<dt><code>res</code></dt><dd><p>response object</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-call"></a></p><h3>Method <code><a href='https://rdrr.io/r/base/call.html'>call()</a></code></h3>
<p>httpuv interface call function</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/base/call.html'>call</a></span>(<span class='kw'>req</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>req</code></dt><dd><p>request object</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>required for httpuv interface</p>

<p><hr>
<a id="method-onHeaders"></a></p><h3>Method <code>onHeaders()</code></h3>
<p>httpuv interface onHeaders function</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>onHeaders</span>(<span class='kw'>req</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>req</code></dt><dd><p>request object</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>required for httpuv interface</p>

<p><hr>
<a id="method-onWSOpen"></a></p><h3>Method <code>onWSOpen()</code></h3>
<p>httpuv interface onWSOpen function</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>onWSOpen</span>(<span class='kw'>ws</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>ws</code></dt><dd><p>WebSocket object</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>required for httpuv interface</p>

<p><hr>
<a id="method-setSerializer"></a></p><h3>Method <code>setSerializer()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>setSerializer</span>(<span class='kw'>serializer</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>serializer</code></dt><dd><p>a serializer function</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Sets the default serializer of the router.</p>

<p><hr>
<a id="method-set404Handler"></a></p><h3>Method <code>set404Handler()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>set404Handler</span>(<span class='kw'>fun</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>fun</code></dt><dd><p>a handler function.</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Sets the handler that gets called if an
incoming request can’t be served by any filter, endpoint, or sub-router.</p>

<h3>Examples</h3>
<p><div class="r example copy"></p><pre>\dontrun{
pr &lt;- plumber$new()
pr$set404Handler(function(req, res) {cat(req$PATH_INFO)})
}
</pre><p></div></p>

<p><hr>
<a id="method-setErrorHandler"></a></p><h3>Method <code>setErrorHandler()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>setErrorHandler</span>(<span class='kw'>fun</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>fun</code></dt><dd><p>a handler function.</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>Sets the error handler which gets invoked if any filter or
endpoint generates an error.</p>

<h3>Examples</h3>
<p><div class="r example copy"></p><pre>\dontrun{
pr &lt;- plumber$new()
pr$setErrorHandler(function(req, res) {cat(res$body)})
}
</pre><p></div></p>

<p><hr>
<a id="method-filter"></a></p><h3>Method <code><a href='https://rdrr.io/r/stats/filter.html'>filter()</a></code></h3>
<p>Add a filter to plumber router</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span>(<span class='kw'>name</span>, <span class='kw'>expr</span>, <span class='kw'>serializer</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>name</code></dt><dd><p>a character string. Name of filter</p></dd>

<dt><code>expr</code></dt><dd><p>an expr that resolve to a filter function or a filter function</p></dd>

<dt><code>serializer</code></dt><dd><p>a serializer function</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-apiSpec"></a></p><h3>Method <code>apiSpec()</code></h3>
<p>Retrieve openAPI file</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>apiSpec</span>()</pre><p></div></p>

<p><hr>
<a id="method-openAPIFile"></a></p><h3>Method <code>openAPIFile()</code></h3>
<p>Retrieve openAPI file</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>openAPIFile</span>()</pre><p></div></p>

<p><hr>
<a id="method-swaggerFile"></a></p><h3>Method <code>swaggerFile()</code></h3>
<p>Retrieve openAPI file</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>swaggerFile</span>()</pre><p></div></p>

<p><hr>
<a id="method-addEndpoint"></a></p><h3>Method <code>addEndpoint()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>addEndpoint</span>(
  <span class='kw'>verbs</span>,
  <span class='kw'>path</span>,
  <span class='kw'>expr</span>,
  <span class='kw'>serializer</span>,
  <span class='kw'>processors</span>,
  preempt = <span class='kw'>NULL</span>,
  params = <span class='kw'>NULL</span>,
  <span class='kw'>comments</span>
)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>verbs</code></dt><dd><p>verbs</p></dd>

<dt><code>path</code></dt><dd><p>path</p></dd>

<dt><code>expr</code></dt><dd><p>expr</p></dd>

<dt><code>serializer</code></dt><dd><p>serializer</p></dd>

<dt><code>processors</code></dt><dd><p>processors</p></dd>

<dt><code>preempt</code></dt><dd><p>preempt</p></dd>

<dt><code>params</code></dt><dd><p>params</p></dd>

<dt><code>comments</code></dt><dd><p>comments</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>addEndpoint has been deprecated in v0.4.0 and will be removed in a coming release. Please use <code>handle()</code> instead.</p>

<p><hr>
<a id="method-addAssets"></a></p><h3>Method <code>addAssets()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>addAssets</span>(<span class='kw'>dir</span>, path = <span class='st'>"/public"</span>, options = <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>())</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>dir</code></dt><dd><p>dir</p></dd>

<dt><code>path</code></dt><dd><p>path</p></dd>

<dt><code>options</code></dt><dd><p>options</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>addAssets has been deprecated in v0.4.0 and will be removed in a coming release. Please use <code>mount</code> and <code>PlumberStatic$new()</code> instead.</p>

<p><hr>
<a id="method-addFilter"></a></p><h3>Method <code>addFilter()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>addFilter</span>(<span class='kw'>name</span>, <span class='kw'>expr</span>, <span class='kw'>serializer</span>, <span class='kw'>processors</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>name</code></dt><dd><p>name</p></dd>

<dt><code>expr</code></dt><dd><p>expr</p></dd>

<dt><code>serializer</code></dt><dd><p>serializer</p></dd>

<dt><code>processors</code></dt><dd><p>processors</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>addFilter has been deprecated in v0.4.0 and will be removed in a coming release. Please use <code>filter</code> instead.</p>

<p><hr>
<a id="method-addGlobalProcessor"></a></p><h3>Method <code>addGlobalProcessor()</code></h3>

<h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>addGlobalProcessor</span>(<span class='kw'>proc</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>proc</code></dt><dd><p>proc</p></dd>

</dl><p></div></p>
<h3>Details</h3>
<p>addGlobalProcessor has been deprecated in v0.4.0 and will be removed in a coming release. Please use <code>registerHook</code>(s) instead.</p>

<p><hr>
<a id="method-clone"></a></p><h3>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h3>Usage</h3>
<p><div class="r"></p><pre><span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>clone</span>(deep = <span class='fl'>FALSE</span>)</pre><p></div></p>

<h3>Arguments</h3>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## ------------------------------------------------</span>
<span class='co'>## Method `plumber$run`</span>
<span class='co'>## ------------------------------------------------</span>

<span class='co'>if</span> (<span class='fl'>FALSE</span>) {
<span class='kw'>pr</span> <span class='op'>&lt;-</span> <span class='kw'>plumber</span><span class='op'>$</span><span class='kw'>new</span>
<span class='kw'>swagger</span> <span class='op'>&lt;-</span> <span class='fu'>function</span>(<span class='kw'>pr_</span>, <span class='kw'>spec</span>) {
  <span class='kw'>spec</span><span class='op'>$</span><span class='kw'>servers</span>[[<span class='fl'>1</span>]]<span class='op'>$</span><span class='kw'>description</span> <span class='op'>&lt;-</span> <span class='st'>"MyCustomAPISpec"</span>
  <span class='kw'>spec</span>
}
<span class='kw'>pr</span><span class='op'>$</span><span class='fu'>run</span>(swagger = <span class='kw'>swagger</span>)
}

<span class='co'>## ------------------------------------------------</span>
<span class='co'>## Method `plumber$mount`</span>
<span class='co'>## ------------------------------------------------</span>

<span class='co'>if</span> (<span class='fl'>FALSE</span>) {
<span class='kw'>root</span> <span class='op'>&lt;-</span> <span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>new</span>()

<span class='kw'>users</span> <span class='op'>&lt;-</span> <span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>new</span>(<span class='st'>"users.R"</span>)
<span class='kw'>root</span><span class='op'>$</span><span class='fu'>mount</span>(<span class='st'>"/users"</span>, <span class='kw'>users</span>)

<span class='kw'>products</span> <span class='op'>&lt;-</span> <span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>new</span>(<span class='st'>"products.R"</span>)
<span class='kw'>root</span><span class='op'>$</span><span class='fu'>mount</span>(<span class='st'>"/products"</span>, <span class='kw'>products</span>)
}

<span class='co'>## ------------------------------------------------</span>
<span class='co'>## Method `plumber$registerHook`</span>
<span class='co'>## ------------------------------------------------</span>

<span class='co'>if</span> (<span class='fl'>FALSE</span>) {
<span class='kw'>pr</span> <span class='op'>&lt;-</span> <span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>new</span>()
<span class='kw'>pr</span><span class='op'>$</span><span class='fu'>registerHook</span>(<span class='st'>"preroute"</span>, <span class='fu'>function</span>(<span class='kw'>req</span>){
  <span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span>(<span class='st'>"Routing a request for"</span>, <span class='kw'>req</span><span class='op'>$</span><span class='kw'>PATH_INFO</span>, <span class='st'>"...\n"</span>)
})
<span class='kw'>pr</span><span class='op'>$</span><span class='fu'>registerHooks</span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
  preserialize=<span class='fu'>function</span>(<span class='kw'>req</span>, <span class='kw'>value</span>){
    <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='st'>"About to serialize this value:"</span>)
    <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='kw'>value</span>)

    <span class='co'># Must return the value since we took one in. Here we're not choosing</span>
    <span class='co'># to mutate it, but we could.</span>
    <span class='kw'>value</span>
  },
  postserialize=<span class='fu'>function</span>(<span class='kw'>res</span>){
    <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='st'>"We serialized the value as:"</span>)
    <span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='kw'>res</span><span class='op'>$</span><span class='kw'>body</span>)
  }
))

<span class='kw'>pr</span><span class='op'>$</span><span class='fu'>handle</span>(<span class='st'>"GET"</span>, <span class='st'>"/"</span>, <span class='fu'>function</span>(){ <span class='fl'>123</span> })
}

<span class='co'>## ------------------------------------------------</span>
<span class='co'>## Method `plumber$handle`</span>
<span class='co'>## ------------------------------------------------</span>

<span class='co'>if</span> (<span class='fl'>FALSE</span>) {
<span class='kw'>pr</span> <span class='op'>&lt;-</span> <span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>new</span>()
<span class='kw'>pr</span><span class='op'>$</span><span class='fu'>handle</span>(<span class='st'>"GET"</span>, <span class='st'>"/"</span>, <span class='fu'>function</span>(){
  <span class='st'>"&lt;html&gt;&lt;h1&gt;Programmatic Plumber!&lt;/h1&gt;&lt;/html&gt;"</span>
}, serializer=<span class='kw'>plumber</span>::<span class='fu'><a href='https://www.rplumber.io/reference/serializers.html'>serializer_html</a></span>())
}

<span class='co'>## ------------------------------------------------</span>
<span class='co'>## Method `plumber$set404Handler`</span>
<span class='co'>## ------------------------------------------------</span>

<span class='co'>if</span> (<span class='fl'>FALSE</span>) {
<span class='kw'>pr</span> <span class='op'>&lt;-</span> <span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>new</span>()
<span class='kw'>pr</span><span class='op'>$</span><span class='fu'>set404Handler</span>(<span class='fu'>function</span>(<span class='kw'>req</span>, <span class='kw'>res</span>) {<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span>(<span class='kw'>req</span><span class='op'>$</span><span class='kw'>PATH_INFO</span>)})
}

<span class='co'>## ------------------------------------------------</span>
<span class='co'>## Method `plumber$setErrorHandler`</span>
<span class='co'>## ------------------------------------------------</span>

<span class='co'>if</span> (<span class='fl'>FALSE</span>) {
<span class='kw'>pr</span> <span class='op'>&lt;-</span> <span class='kw'>plumber</span><span class='op'>$</span><span class='fu'>new</span>()
<span class='kw'>pr</span><span class='op'>$</span><span class='fu'>setErrorHandler</span>(<span class='fu'>function</span>(<span class='kw'>req</span>, <span class='kw'>res</span>) {<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span>(<span class='kw'>res</span><span class='op'>$</span><span class='kw'>body</span>)})
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://schloerke.com/'>Barret Schloerke</a>, <a href='https://trestletech.com/'>Jeff Allen</a>,  RStudio.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


